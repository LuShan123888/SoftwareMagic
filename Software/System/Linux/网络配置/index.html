

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/logo.png">
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Cian">
  <meta name="keywords" content="software computer programmer otes Cloud personal">
  <meta name="description" content="Linux 网络配置 ping ping命令用来测试主机之间网络的连通性,执行ping指令会使用ICMP传输协议,发出要求回应的信息,若远端主机的网络功能没有问题,就会回应该信息,因而得知该主机运作正常 1ping(选项)(参数)  选项  -d:使用Socket的SO_DEBUG功能 -c&lt;完成次数&gt;:设置完成要求回应的次数 -f:极限检测 -i&lt;间隔秒数&gt;:指定收发信息">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux 网络配置">
<meta property="og:url" content="https://softwaremagic.lushan.tk/Software/System/Linux/%E7%BD%91%E7%BB%9C%E9%85%8D%E7%BD%AE/">
<meta property="og:site_name" content="SoftwareMagic">
<meta property="og:description" content="Linux 网络配置 ping ping命令用来测试主机之间网络的连通性,执行ping指令会使用ICMP传输协议,发出要求回应的信息,若远端主机的网络功能没有问题,就会回应该信息,因而得知该主机运作正常 1ping(选项)(参数)  选项  -d:使用Socket的SO_DEBUG功能 -c&lt;完成次数&gt;:设置完成要求回应的次数 -f:极限检测 -i&lt;间隔秒数&gt;:指定收发信息">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-10-31T07:21:59.000Z">
<meta property="article:modified_time" content="2021-10-31T07:21:59.000Z">
<meta property="article:author" content="Cian">
<meta property="article:tag" content="software computer programmer otes Cloud personal">
<meta name="twitter:card" content="summary_large_image">
  
  <title>Linux 网络配置 - SoftwareMagic</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"softwaremagic.lushan.tk","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/local-search.xml"};
  </script>
  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/utils.js" ></script>
  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 50vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>SoftwareMagic</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/background.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Linux 网络配置">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-10-31 15:21" pubdate>
        2021年10月31日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      8.5k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      26 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Linux 网络配置</h1>
            
            <div class="markdown-body">
              <h1>Linux 网络配置</h1>
<h2 id="ping">ping</h2>
<p>ping命令用来测试主机之间网络的连通性,执行ping指令会使用ICMP传输协议,发出要求回应的信息,若远端主机的网络功能没有问题,就会回应该信息,因而得知该主机运作正常</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">ping</span><span class="hljs-params">(选项)</span><span class="hljs-params">(参数)</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li><strong>选项</strong>
<ul>
<li>-d:使用Socket的SO_DEBUG功能</li>
<li>-c&lt;完成次数&gt;:设置完成要求回应的次数</li>
<li>-f:极限检测</li>
<li>-i&lt;间隔秒数&gt;:指定收发信息的间隔时间</li>
<li>-I&lt;网络界面&gt;:使用指定的网络界面送出数据包</li>
<li>-l&lt;前置载入&gt;:设置在送出要求信息之前,先行发出的数据包</li>
<li>-n:只输出数值</li>
<li>-p&lt;范本样式&gt;:设置填满数据包的范本样式</li>
<li>-q:不显示指令执行过程,开头和结尾的相关信息除外</li>
<li>-r:忽略普通的Routing Table,直接将数据包送到远端主机上</li>
<li>-R:记录路由过程</li>
<li>-s&lt;数据包大小&gt;:设置数据包的大小</li>
<li>-t&lt;存活数值&gt;:设置存活数值TTL的大小</li>
<li>-v:详细显示指令的执行过程</li>
</ul>
</li>
<li><strong>参数</strong>
<ul>
<li>目的主机:指定发送ICMP报文的目的主机</li>
</ul>
</li>
</ul>
<h2 id="ifconfig">ifconfig</h2>
<p>ifconfig命令被用于配置和显示Linux内核中网络接口的网络参数,用ifconfig命令配置的网卡信息,在网卡重启后机器重启后,配置就不存在,要想将上述的配置信息永远的存的电脑里,那就要修改网卡的配置文件了</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">ifconfig</span><span class="hljs-params">(参数)</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>add&lt;地址&gt;:设置网络设备IPv6的ip地址</li>
<li>del&lt;地址&gt;:删除网络设备IPv6的IP地址</li>
<li>down:关闭指定的网络设备</li>
<li>&lt;hw&lt;网络设备类型&gt;&lt;硬件地址&gt;:设置网络设备的类型与硬件地址</li>
<li>io_addr&lt;I/O地址&gt;:设置网络设备的I/O地址</li>
<li>irq&lt;IRQ地址&gt;:设置网络设备的IRQ</li>
<li>media&lt;网络媒介类型&gt;:设置网络设备的媒介类型</li>
<li>mem_start&lt;内存地址&gt;:设置网络设备在主内存所占用的起始地址</li>
<li>metric&lt;数目&gt;:指定在计算数据包的转送次数时,所要加上的数目</li>
<li>mtu&lt;字节&gt;:设置网络设备的MTU</li>
<li>netmask&lt;子网掩码&gt;:设置网络设备的子网掩码</li>
<li>tunnel&lt;地址&gt;:建立IPv4与IPv6之间的隧道通信地址</li>
<li>up:启动指定的网络设备</li>
<li>-broadcast&lt;地址&gt;:将要送往指定地址的数据包当成广播数据包来处理</li>
<li>-pointopoint&lt;地址&gt;:与指定地址的网络设备建立直接连线,此模式具有保密功能</li>
<li>-promisc:关闭或启动指定网络设备的promiscuous模式</li>
<li>IP地址:指定网络设备的IP地址</li>
<li>网络设备:指定网络设备的名称</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta">#</span><span class="bash">如果命令未找到,安装net-tools</span><br>yum install net-tools.x86_64<br></code></pre></td></tr></table></figure>
<p><strong>实例</strong></p>
<p><strong>启动关闭指定网卡</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ifconfig</span> eth<span class="hljs-number">0</span> up<br><span class="hljs-attribute">ifconfig</span> eth<span class="hljs-number">0</span> down<br></code></pre></td></tr></table></figure>
<ul>
<li><code>ifconfig eth0 up</code>为启动网卡eth0,<code>ifconfig eth0 down</code>为关闭网卡eth0,ssh登陆linux服务器操作要小心,关闭了就不能开启了,除非你有多网卡</li>
</ul>
<p><strong>为网卡配置和删除IPv6地址</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">ifconfig</span> eth<span class="hljs-number">0</span> add <span class="hljs-number">33</span>ffe:<span class="hljs-number">3240</span>:<span class="hljs-number">800</span>:<span class="hljs-number">1005</span>::<span class="hljs-number">2</span>/<span class="hljs-number">64</span>    #为网卡eth<span class="hljs-number">0</span>配置IPv<span class="hljs-number">6</span>地址<br><span class="hljs-attribute">ifconfig</span> eth<span class="hljs-number">0</span> del <span class="hljs-number">33</span>ffe:<span class="hljs-number">3240</span>:<span class="hljs-number">800</span>:<span class="hljs-number">1005</span>::<span class="hljs-number">2</span>/<span class="hljs-number">64</span>    #为网卡eth<span class="hljs-number">0</span>删除IPv<span class="hljs-number">6</span>地址<br></code></pre></td></tr></table></figure>
<p><strong>用ifconfig修改MAC地址</strong></p>
<figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs elixir">ifconfig eth0 hw ether 00<span class="hljs-symbol">:AA</span><span class="hljs-symbol">:BB</span><span class="hljs-symbol">:CC</span><span class="hljs-symbol">:dd</span><span class="hljs-symbol">:EE</span><br></code></pre></td></tr></table></figure>
<p><strong>配置IP地址</strong></p>
<figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs dns">$ ifconfig eth<span class="hljs-number">0 192.168.2</span>.<span class="hljs-number">10</span><br>$ ifconfig eth<span class="hljs-number">0 192.168.2</span>.<span class="hljs-number">10</span> netmask <span class="hljs-number">255.255.255.0</span><br>$ ifconfig eth<span class="hljs-number">0 192.168.2</span>.<span class="hljs-number">10</span> netmask <span class="hljs-number">255.255.255.0</span> broadcast <span class="hljs-number">192.168.2.255</span><br></code></pre></td></tr></table></figure>
<h2 id="route">route</h2>
<ul>
<li>route命令用来显示并设置Linux内核中的网络路由表,route命令设置的路由主要是静态路由,要实现两个不同的子网之间的通信,需要一台连接两个网络的路由器,或者同时位于两个网络的网关来实现</li>
<li>在Linux系统中设置路由通常是为了解决以下问题:该Linux系统在一个局域网中,局域网中有一个网关,能够让机器访问Internet,那么就需要将这台机器的ip地址设置为Linux机器的默认路由,要注意的是,直接在命令行下执行route命令来添加路由,不会永久保存,当网卡重启或者机器重启之后,该路由就失效了,可以在<code>/etc/rc.local</code>中添加route命令来保证该路由设置永久有效</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">route</span><span class="hljs-params">(选项)</span><span class="hljs-params">(参数)</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li><strong>选项</strong>
<ul>
<li>-A:设置地址类型</li>
<li>-C:打印将Linux核心的路由缓存</li>
<li>-v:详细信息模式</li>
<li>-n:不执行DNS反向查找,直接显示数字形式的IP地址</li>
<li>-e:netstat格式显示路由表</li>
<li>-net:到一个网络的路由表</li>
<li>-host:到一个主机的路由表</li>
</ul>
</li>
<li><strong>参数</strong>
<ul>
<li>Add:增加指定的路由记录</li>
<li>Del:删除指定的路由记录</li>
<li>Target:目的网络或目的主机</li>
<li>gw:设置默认网关</li>
<li>mss:设置TCP的最大区块长度(MSS),单位MB</li>
<li>window:指定通过路由表的TCP连接的TCP窗口大小</li>
<li>dev:路由记录所表示的网络接口</li>
</ul>
</li>
</ul>
<h3 id="实例">实例</h3>
<p><strong>显示当前路由</strong></p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">$ route<br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br><span class="hljs-number">112.124.12.0</span>    *               <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">252</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.160.0.0</span>      *               <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">240</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">192.168.0.0</span>     <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>   <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">172.16.0.0</span>      <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>   <span class="hljs-number">255</span>.<span class="hljs-number">240</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">10.0.0.0</span>        <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>   <span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>       UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br>default         <span class="hljs-number">112</span>.<span class="hljs-number">124</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><br>$ route -n<br>Kernel IP routing table<br>Destination     Gateway         Genmask         Flags Metric Ref    Use Iface<br><span class="hljs-number">112.124.12.0</span>    <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">252</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br><span class="hljs-number">10.160.0.0</span>      <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">240</span>.<span class="hljs-number">0</span>   U     <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">192.168.0.0</span>     <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>   <span class="hljs-number">255</span>.<span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">172.16.0.0</span>      <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>   <span class="hljs-number">255</span>.<span class="hljs-number">240</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>     UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">10.0.0.0</span>        <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>   <span class="hljs-number">255</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>       UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth0<br><span class="hljs-number">0.0.0.0</span>         <span class="hljs-number">112</span>.<span class="hljs-number">124</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span>  <span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>.<span class="hljs-number">0</span>         UG    <span class="hljs-number">0</span>      <span class="hljs-number">0</span>        <span class="hljs-number">0</span> eth1<br></code></pre></td></tr></table></figure>
<ul>
<li>其中Flags为路由标志,标记当前网络节点的状态,Flags标志说明:
<ul>
<li>U Up表示此路由当前为启动状态</li>
<li>H Host,表示此网关为一主机</li>
<li>G Gateway,表示此网关为一路由器</li>
<li>R Reinstate Route,使用动态路由重新初始化的路由</li>
<li>D Dynamically,此路由是动态性地写入</li>
<li>M Modified,此路由是由路由守护程序或导向器动态修改</li>
<li>! 表示此路由当前为关闭状态</li>
</ul>
</li>
</ul>
<p><strong>添加网关/设置网关</strong></p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">route</span> add -net <span class="hljs-number">224.0.0.0</span> netmask <span class="hljs-number">240.0.0.0</span> dev eth<span class="hljs-number">0</span>    #增加一条到达<span class="hljs-number">244.0.0.0</span>的路由<br></code></pre></td></tr></table></figure>
<p><strong>屏蔽一条路由</strong></p>
<figure class="highlight llvm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs llvm">route <span class="hljs-keyword">add</span> -net <span class="hljs-number">224.0</span>.<span class="hljs-number">0.0</span> netmask <span class="hljs-number">240.0</span>.<span class="hljs-number">0.0</span> reject     #增加一条屏蔽的路由<span class="hljs-punctuation">,</span>目的地址为<span class="hljs-number">224</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>.<span class="hljs-keyword">x</span>将被拒绝<br></code></pre></td></tr></table></figure>
<p><strong>删除路由记录</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">route</span> del -net <span class="hljs-number">224.0.0.0</span> netmask <span class="hljs-number">240.0.0.0</span><br>route del -net <span class="hljs-number">224.0.0.0</span> netmask <span class="hljs-number">240.0.0.0</span> reject<br></code></pre></td></tr></table></figure>
<p><strong>删除和添加设置默认网关</strong></p>
<figure class="highlight routeros"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs routeros">route del<span class="hljs-built_in"> default </span>gw 192.168.120.240<span class="hljs-built_in"></span><br><span class="hljs-built_in">route </span><span class="hljs-builtin-name">add</span><span class="hljs-built_in"> default </span>gw 192.168.120.240<br></code></pre></td></tr></table></figure>
<h2 id="ip">ip</h2>
<p>ip命令用来显示或操纵Linux主机的路由,网络设备,策略路由和隧道,是Linux下较新的功能强大的网络配置工具</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">ip</span><span class="hljs-params">(选项)</span><span class="hljs-params">(参数)</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li><strong>选项</strong>
<ul>
<li>-V:显示指令版本信息</li>
<li>-s:输出更详细的信息</li>
<li>-f:强制使用指定的协议族</li>
<li>-4:指定使用的网络层协议是IPv4协议</li>
<li>-6:指定使用的网络层协议是IPv6协议</li>
<li>-0:输出信息每条记录输出一行,即使内容较多也不换行显示</li>
<li>-r:显示主机时,不使用IP地址,而使用主机的域名</li>
</ul>
</li>
<li><strong>参数</strong>
<ul>
<li>网络对象:指定要管理的网络对象</li>
<li>具体操作:对指定的网络对象完成具体操作</li>
<li>help:显示网络对象支持的操作命令的帮助信息</li>
</ul>
</li>
</ul>
<h3 id="实例-2">实例</h3>
<p><strong>用ip命令显示网络设备的运行状态</strong></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-string">$</span> <span class="hljs-string">ip</span> <span class="hljs-string">link</span> <span class="hljs-string">list</span><br><span class="hljs-attr">1: lo:</span> <span class="hljs-string">&lt;LOOPBACK,UP,LOWER_UP&gt;</span> <span class="hljs-string">mtu</span> <span class="hljs-number">16436</span> <span class="hljs-string">qdisc</span> <span class="hljs-string">noqueue</span><br>    <span class="hljs-string">link/loopback</span> <span class="hljs-number">00</span><span class="hljs-string">:00:00:00:00:00</span> <span class="hljs-string">brd</span> <span class="hljs-number">00</span><span class="hljs-string">:00:00:00:00:00</span><br><span class="hljs-attr">2: eth0:</span> <span class="hljs-string">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> <span class="hljs-string">mtu</span> <span class="hljs-number">1500 </span><span class="hljs-string">qdisc</span> <span class="hljs-string">pfifo_fast</span> <span class="hljs-string">qlen</span> <span class="hljs-number">1000</span><br>    <span class="hljs-string">link/ether</span> <span class="hljs-number">00</span><span class="hljs-string">:16:3e:00:1e:51</span> <span class="hljs-string">brd</span> <span class="hljs-string">ff:ff:ff:ff:ff:ff</span><br><span class="hljs-attr">3: eth1:</span> <span class="hljs-string">&lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt;</span> <span class="hljs-string">mtu</span> <span class="hljs-number">1500 </span><span class="hljs-string">qdisc</span> <span class="hljs-string">pfifo_fast</span> <span class="hljs-string">qlen</span> <span class="hljs-number">1000</span><br>    <span class="hljs-string">link/ether</span> <span class="hljs-number">00</span><span class="hljs-string">:16:3e:00:1e:52</span> <span class="hljs-string">brd</span> <span class="hljs-string">ff:ff:ff:ff:ff:ff</span><br></code></pre></td></tr></table></figure>
<p><strong>显示更加详细的设备信息</strong></p>
<figure class="highlight tap"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs tap">$ ip -s link list<br>1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu<span class="hljs-number"> 16436 </span>qdisc noqueue<br>    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00<br>    RX: bytes  packets  errors  dropped overrun mcast<br>   <span class="hljs-number"> 5082831 </span>  <span class="hljs-number"> 56145 </span>  <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>      0<br>    TX: bytes  packets  errors  dropped carrier collsns<br>   <span class="hljs-number"> 5082831 </span>  <span class="hljs-number"> 56145 </span>  <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>      0<br>2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu<span class="hljs-number"> 1500 </span>qdisc pfifo_fast qlen 1000<br>    link/ether 00:16:3e:00:1e:51 brd ff:ff:ff:ff:ff:ff<br>    RX: bytes  packets  errors  dropped overrun mcast<br>   <span class="hljs-number"> 3641655380 </span>62027099<span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>      0<br>    TX: bytes  packets  errors  dropped carrier collsns<br>   <span class="hljs-number"> 6155236 </span>  <span class="hljs-number"> 89160 </span>  <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>      0<br>3: eth1: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu<span class="hljs-number"> 1500 </span>qdisc pfifo_fast qlen 1000<br>    link/ether 00:16:3e:00:1e:52 brd ff:ff:ff:ff:ff:ff<br>    RX: bytes  packets  errors  dropped overrun mcast<br>   <span class="hljs-number"> 2562136822 </span>488237847<span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>      0<br>    TX: bytes  packets  errors  dropped carrier collsns<br>   <span class="hljs-number"> 3486617396 </span>9691081 <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>     <span class="hljs-number"> 0 </span>      0<br></code></pre></td></tr></table></figure>
<p><strong>显示核心路由表</strong></p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">$ ip route list<br><span class="hljs-number">112.124.12.0</span>/<span class="hljs-number">22</span> dev eth1  proto kernel  scope link  src <span class="hljs-number">112</span>.<span class="hljs-number">124</span>.<span class="hljs-number">15</span>.<span class="hljs-number">130</span><br><span class="hljs-number">10.160.0.0</span>/<span class="hljs-number">20</span> dev eth0  proto kernel  scope link  src <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">7</span>.<span class="hljs-number">81</span><br><span class="hljs-number">192.168.0.0</span>/<span class="hljs-number">16</span> via <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span> dev eth0<br><span class="hljs-number">172.16.0.0</span>/<span class="hljs-number">12</span> via <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span> dev eth0<br><span class="hljs-number">10.0.0.0</span>/<span class="hljs-number">8</span> via <span class="hljs-number">10</span>.<span class="hljs-number">160</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span> dev eth0<br>default via <span class="hljs-number">112</span>.<span class="hljs-number">124</span>.<span class="hljs-number">15</span>.<span class="hljs-number">247</span> dev eth1<br></code></pre></td></tr></table></figure>
<p><strong>显示邻居表</strong></p>
<figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs accesslog">$ ip neigh list<br><span class="hljs-number">112.124.15.247</span> dev eth1 lladdr <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:0c:9f:f3:<span class="hljs-number">88</span> REACHABLE<br><span class="hljs-number">10.160.15.247</span> dev eth0 lladdr <span class="hljs-number">00</span>:<span class="hljs-number">00</span>:0c:9f:f2:c0 STALE<br></code></pre></td></tr></table></figure>
<h2 id="netstat">netstat</h2>
<ul>
<li>netstat命令用来打印Linux中网络系统的状态信息,可让你得知整个Linux系统的网络情况</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">netstat</span><span class="hljs-params">(选项)</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>-a或–all:显示所有连线中的Socket</li>
<li>-A&lt;网络类型&gt;或–&lt;网络类型&gt;:列出该网络类型连线中的相关地址</li>
<li>-c或–continuous:持续列出网络状态</li>
<li>-C或–cache:显示路由器配置的快取信息</li>
<li>-e或–extend:显示网络其他相关信息</li>
<li>-F或–fib:显示FIB</li>
<li>-g或–groups:显示多重广播功能群组组员名单</li>
<li>-h或–help:在线帮助</li>
<li>-i或–interfaces:显示网络界面信息表单</li>
<li>-l或–listening:显示监控中的服务器的Socket</li>
<li>-M或–masquerade:显示伪装的网络连线</li>
<li>-n或–numeric:直接使用ip地址,而不通过域名服务器</li>
<li>-N或–netlink或–symbolic:显示网络硬件外围设备的符号连接名称</li>
<li>-o或–timers:显示计时器</li>
<li>-p或–programs:显示正在使用Socket的程序识别码和程序名称</li>
<li>-r或–route:显示Routing Table</li>
<li>-s或–statistice:显示网络工作信息统计表</li>
<li>-t或–tcp:显示TCP传输协议的连线状况</li>
<li>-u或–udp:显示UDP传输协议的连线状况</li>
<li>-v或–verbose:显示指令执行过程</li>
<li>-V或–version:显示版本信息</li>
<li>-w或–raw:显示RAW传输协议的连线状况</li>
<li>-x或–unix:此参数的效果和指定&quot;-A unix&quot;参数相同</li>
<li>–ip或–inet:此参数的效果和指定&quot;-A inet&quot;参数相同</li>
</ul>
<h3 id="实例-3">实例</h3>
<p><strong>列出所有端口 (包括监听和未监听的)</strong></p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">netstat -<span class="hljs-keyword">a</span>     <span class="hljs-comment">#列出所有端口</span><br>netstat -<span class="hljs-keyword">at</span>    <span class="hljs-comment">#列出所有tcp端口</span><br>netstat -au    <span class="hljs-comment">#列出所有udp端口</span><br></code></pre></td></tr></table></figure>
<p><strong>列出所有处于监听状态的 Sockets</strong></p>
<figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs gauss">netstat -l        <span class="hljs-meta">#只显示监听端口</span><br>netstat -<span class="hljs-keyword">lt</span>       <span class="hljs-meta">#只列出所有监听 tcp 端口</span><br>netstat -<span class="hljs-built_in">lu</span>       <span class="hljs-meta">#只列出所有监听 udp 端口</span><br>netstat -lx       <span class="hljs-meta">#只列出所有监听 UNIX 端口</span><br></code></pre></td></tr></table></figure>
<p><strong>显示每个协议的统计信息</strong></p>
<figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stata">netstat -s   显示所有端口的统计信息<br>netstat -<span class="hljs-keyword">st</span>   显示TCP端口的统计信息<br>netstat -<span class="hljs-keyword">su</span>   显示UDP端口的统计信息<br></code></pre></td></tr></table></figure>
<p><strong>找出程序运行的端口</strong></p>
<ul>
<li>并不是所有的进程都能找到,没有权限的会不显示,使用 root 权限查看所有的信息</li>
</ul>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">netstat -ap <span class="hljs-string">| grep ssh</span><br></code></pre></td></tr></table></figure>
<ul>
<li>找出运行在指定端口的进程:</li>
</ul>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">netstat -an | <span class="hljs-keyword">grep</span> <span class="hljs-string">&#x27;:80&#x27;</span><br></code></pre></td></tr></table></figure>
<p><strong>显示网络接口列表</strong></p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">netstat -<span class="hljs-selector-tag">i</span><br></code></pre></td></tr></table></figure>
<h2 id="nmcli">nmcli</h2>
<ul>
<li>nmcli命令 是 NetworkManager client 网络管理客户端</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">nmcli [OPTIONS] OBJECT &#123; COMMAND | help &#125;<br></code></pre></td></tr></table></figure>
<ul>
<li><strong>OPTIONS</strong>
<ul>
<li><code>-t[erse]</code>:terse output 简洁的输出</li>
<li><code> -p[retty]</code>:pretty output 漂亮的输出</li>
<li><code>-m[ode] tabular|multiline</code>:output mode  输出模式</li>
<li><code>-f[ields] &lt;field1,field2,...&gt;|all|common</code>:specify fields to output 指定要输出的字段</li>
<li><code>-e[scape] yes|no</code>:escape columns separators in values 在值中转义列分隔符</li>
<li><code>-n[ocheck]</code>:不要检查nmcli和NetworkManager版本</li>
<li><code>-a[sk]</code>:要求缺少参数</li>
<li><code>-w[ait] &lt;seconds&gt;</code>:设置超时等待整理操作</li>
</ul>
</li>
<li><strong>OBJECT</strong>
<ul>
<li><code>g[eneral]</code>:NetworkManager的一般状态和操作</li>
<li><code>n[etworking]</code>:整体组网控制</li>
<li><code>r[adio]</code>:NetworkManager切换开关</li>
<li><code>c[onnection]</code>:NetworkManager的连接</li>
<li><code>d[evice]</code>:由NetworkManager管理的设备</li>
<li><code>a[gent]</code>:NetworkManager秘密代理或polkit代理</li>
</ul>
</li>
</ul>
<p><strong>实例</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">nmcli connection show           # 查看当前连接状态<br>nmcli connection reload         # 重启服务<br> nmcli connection show -active   # 显示活动的连接<br>nmcli connection show &quot;lan eth0&quot;# 显示指定一个网络连接配置<br>nmcli device status             # 显示设备状态<br>nmcli device show eno16777736   # 显示指定接口属性<br>nmcli device show               # 显示全部接口属性<br>nmcli con up static             # 启用static连接配置<br>nmcli con up default            # 启用default连接配置<br>nmcli con add help              # 查看帮助<br></code></pre></td></tr></table></figure>
<h2 id="dhclient">dhclient</h2>
<p>dhclient命令使用动态主机配置协议动态的配置网络接口的网络参数</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">dhclient</span><span class="hljs-params">(选项)</span><span class="hljs-params">(参数)</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li><strong>选项</strong>
<ul>
<li>0:指定dhcp客户端监听的端口号</li>
<li>-d:总是以前台方式运行程序</li>
<li>-q:安静模式,不打印任何错误的提示信息</li>
<li>-r:释放ip地址</li>
</ul>
</li>
<li><strong>参数</strong>
<ul>
<li>网络接口:操作的网络接口</li>
</ul>
</li>
</ul>
<p><strong>实例</strong></p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">dhclient</span> -r     <span class="hljs-comment">#释放IP</span><br>dhclient        <span class="hljs-comment">#获取IP</span><br></code></pre></td></tr></table></figure>
<h2 id="配置文件">配置文件</h2>
<blockquote>
<p><strong>Linux中网络相关的配置文件</strong></p>
<ul>
<li><code>/ect/hosts</code>:配置主机名(域名)和私有IP地址的对应</li>
<li><code>/etc/sysconfig/network</code>:配置主机名和网关</li>
<li><code>/etc/sysconfig/network-scripts/ifcfg-eth0</code>:eth0配置文件,eth1则文件名为ifcfg-eth1,以此类推(这里的ethX是网卡接口的名称,也可能是其他名称,例如emX等)</li>
<li><code>/etc/resolv.conf</code>:配置DNS(关于使用哪个DNS服务器的配置)</li>
</ul>
</blockquote>
<p><strong>编辑网卡配置文件</strong></p>
<ul>
<li>网络配置目录: <code>cd /etc/sysconfig/network-scripts</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo vim /etc/sysconfig/network-scripts/ifcfg-ens33<br></code></pre></td></tr></table></figure>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-attr">TYPE</span>=<span class="hljs-string">Ethernet</span><br><span class="hljs-attr">PROXY_METHOD</span>=<span class="hljs-string">none</span><br><span class="hljs-attr">BROWSER_ONLY</span>=<span class="hljs-string">no</span><br><span class="hljs-attr">BOOTPROTO</span>=<span class="hljs-string">static</span><br><span class="hljs-attr">DEFROUTE</span>=<span class="hljs-string">yes</span><br><span class="hljs-attr">IPV4_FAILURE_FATAL</span>=<span class="hljs-string">no</span><br><span class="hljs-attr">IPV6INIT</span>=<span class="hljs-string">yes</span><br><span class="hljs-attr">IPV6_AUTOCONF</span>=<span class="hljs-string">yes</span><br><span class="hljs-attr">IPV6_DEFROUTE</span>=<span class="hljs-string">yes</span><br><span class="hljs-attr">IPV6_FAILURE_FATAL</span>=<span class="hljs-string">no</span><br><span class="hljs-attr">IPV6_ADDR_GEN_MODE</span>=<span class="hljs-string">stable-privacy</span><br><span class="hljs-attr">NAME</span>=<span class="hljs-string">ens33</span><br><span class="hljs-attr">UUID</span>=<span class="hljs-string">9a3c5944-e6fd-421d-b359-32430028b848</span><br><span class="hljs-attr">DEVICE</span>=<span class="hljs-string">ens33</span><br><span class="hljs-attr">ONBOOT</span>=<span class="hljs-string">yes</span><br><span class="hljs-attr">IPADDR</span>=<span class="hljs-string">192.168.134.128</span><br><span class="hljs-attr">NETMASK</span>=<span class="hljs-string">255.255.0.0</span><br><span class="hljs-attr">GATEWAY</span>=<span class="hljs-string">192.168.134.2</span><br><span class="hljs-attr">DNS</span>=<span class="hljs-string">192.168.134.2</span><br></code></pre></td></tr></table></figure>
<p><strong>重启网卡服务</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart network.service<br></code></pre></td></tr></table></figure>
<h2 id="防火墙配置">防火墙配置</h2>
<p><strong>查看firewall服务状态</strong></p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">systemctl status firewalld</span><br></code></pre></td></tr></table></figure>
<p><strong>管理firewall服务</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 开启</span><br>service firewalld start<br><span class="hljs-comment"># 重启</span><br>service firewalld restart<br><span class="hljs-comment"># 关闭</span><br>service firewalld stop<br></code></pre></td></tr></table></figure>
<p><strong>查看防火墙规则</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">firewall-cmd --list-all    <span class="hljs-comment"># 查看全部信息</span><br>firewall-cmd --list-ports  <span class="hljs-comment"># 只看端口信息</span><br></code></pre></td></tr></table></figure>
<p><strong>开启端口</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">firewall-cmd --zone=public --add-port=80/tcp --permanent<br></code></pre></td></tr></table></figure>
<ul>
<li><code>--zone</code>:作用域</li>
<li><code>--add-port=80/tcp</code>:添加端口,格式为:端口/通讯协议</li>
<li><code>--permanent</code>:永久生效,没有此参数重启后失效</li>
</ul>
<p><strong>重启防火墙</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">systemctl restart firewalld.service<br></code></pre></td></tr></table></figure>
<h2 id="端口测试">端口测试</h2>
<p><strong>查看端口占用情况</strong></p>
<figure class="highlight puppet"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs puppet"><span class="hljs-keyword">nmap</span> &#123;<span class="hljs-literal">ip</span>-address&#125; -<span class="hljs-keyword">p</span> &#123;port&#125;<br></code></pre></td></tr></table></figure>
<p><strong>查看端口对应的服务</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">netstat -an | grep 3306<br></code></pre></td></tr></table></figure>
<p><strong>查看进程监听的端口</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">lsof -i:80<br></code></pre></td></tr></table></figure>
<ul>
<li><code>-i</code>:表示网络链接</li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Software/">Software</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/System/">System</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/System/Linux/">Linux</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/Software/Common/UML/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">UML 概述</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/Internet/HTTP/Base64/">
                        <span class="hidden-mobile">Base64</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                

              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
    
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/events.js" ></script>
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/local-search.js" ></script>



  
    <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>









  <script  src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>







<!-- 主题的启动项 保持在最底部 -->
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/boot.js" ></script>


</body>
</html>
