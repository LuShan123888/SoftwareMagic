

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/logo.png">
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#0a5fff">
  <meta name="description" content="">
  <meta name="author" content="Cian">
  <meta name="keywords" content="software computer programmer otes Cloud personal">
  <meta name="description" content="Redis 哨兵模式  哨兵模式能够后台监控主机是否故障,如果故障了则自动将从节点转换为主节点 原理  哨兵通过发送命令,等待 Redis服务器响应,从而监控运行的多个 Redis实例,让 Redis服务器返回其运行状态 当哨兵监测到主节点宕机,会自动将从节点切换成主节点,然后通过发布订阅模式通知其他的从节点,修改配置文件并切换主节点 当主节点恢复连接后,原主节点自动转换为从节点,现主节点不变">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis 哨兵模式">
<meta property="og:url" content="https://softwaremagic.lushan.tk/Software/Backend/Database/Redis/%E9%AB%98%E5%8F%AF%E7%94%A8/%E5%93%A8%E5%85%B5%E6%A8%A1%E5%BC%8F/">
<meta property="og:site_name" content="SoftwareMagic">
<meta property="og:description" content="Redis 哨兵模式  哨兵模式能够后台监控主机是否故障,如果故障了则自动将从节点转换为主节点 原理  哨兵通过发送命令,等待 Redis服务器响应,从而监控运行的多个 Redis实例,让 Redis服务器返回其运行状态 当哨兵监测到主节点宕机,会自动将从节点切换成主节点,然后通过发布订阅模式通知其他的从节点,修改配置文件并切换主节点 当主节点恢复连接后,原主节点自动转换为从节点,现主节点不变">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/LuShan123888/Files/main/Pictures/image-20210817180458601.png">
<meta property="article:published_time" content="2021-10-01T14:56:16.000Z">
<meta property="article:modified_time" content="2021-10-01T14:56:16.000Z">
<meta property="article:author" content="Cian">
<meta property="article:tag" content="software computer programmer otes Cloud personal">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://raw.githubusercontent.com/LuShan123888/Files/main/Pictures/image-20210817180458601.png">
  
  <title>Redis 哨兵模式 - SoftwareMagic</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"softwaremagic.lushan.tk","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":1},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/local-search.xml"};
  </script>
  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/utils.js" ></script>
  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 50vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>SoftwareMagic</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/background.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Redis 哨兵模式">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-10-01 22:56" pubdate>
        2021年10月1日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.5k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      17 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Redis 哨兵模式</h1>
            
              <p class="note note-info">
                
                  本文最后更新于：2021年10月1日 晚上
                
              </p>
            
            <div class="markdown-body">
              <h1>Redis 哨兵模式</h1>
<ul>
<li>哨兵模式能够后台监控主机是否故障,如果故障了则自动将从节点转换为主节点</li>
<li><strong>原理</strong>
<ol>
<li>哨兵通过发送命令,等待 Redis服务器响应,从而监控运行的多个 Redis实例,让 Redis服务器返回其运行状态</li>
<li>当哨兵监测到主节点宕机,会自动将从节点切换成主节点,然后通过发布订阅模式通知其他的从节点,修改配置文件并切换主节点</li>
<li>当主节点恢复连接后,原主节点自动转换为从节点,现主节点不变</li>
</ol>
</li>
<li><strong>优点</strong>
<ul>
<li>哨兵模式是主从模式的升级,手动转换为自动</li>
<li>主从可以切换,故障可以转移,系统的可用性更好</li>
</ul>
</li>
</ul>
<h2 id="多哨兵模式">多哨兵模式</h2>
<ul>
<li>单个哨兵进程对 Redis 服务器进行监控,可能会出现问题,可以使用多个哨兵进行监控,各个哨兵之间还会进行监控,这样就形成了多哨兵模式</li>
</ul>
<p><img src="https://raw.githubusercontent.com/LuShan123888/Files/main/Pictures/image-20210817180458601.png" srcset="/img/loading.gif" lazyload alt=""></p>
<p><strong>流程</strong></p>
<ol>
<li>
<p>每个Sentinel以每秒钟一次的频率向它所知的Master,Slaver以及其他Sentinel实例发送一个PING命令</p>
</li>
<li>
<p>如果一个实例距离最后一次有效回复PING命令的时间超过<code>own-after-millisecounds</code>选项所指定的值,则这个实例会被Sentinel标记为主观下线</p>
</li>
<li>
<p>当有足够足够数量的Sentinel(大于等于配置文件指定的值)在指定的时间范围内确定Master的确进入了主观下线状态,则Master会被标记为客观下线</p>
</li>
<li>
<p>Sentinel从Slave中选出新的Master</p>
<ul>
<li>剔除主观下线,已断线,或者最后一次回复PING命令的时间大于5s的Slave</li>
<li>剔除与失效主服务器连接断开的时长超过<code>down-after</code>选项指定的时长10倍的Slave</li>
<li>按同步数据的偏移量选出数据最完成的Slave</li>
<li>如果偏移量相同,选中ID最小的Slave</li>
</ul>
</li>
<li>
<p>将Slave切换成Master</p>
<ol>
<li>向被选中的从服务器发送<code>SLAVEOF NO ONE</code>命令,让它转成主服务器</li>
<li>通过发布于订阅功能,将更新后的配置传播给所有其他Sentinel,其他Sentinel对它们自己的配置进行更新</li>
<li>向所有Slave下发SLAVEOF命令,指向新的主服务器</li>
<li>redis-slave向master重新建立连接,重放rdb保持数据同步</li>
</ol>
</li>
</ol>
<ul>
<li>在上述转移过程中,伴随着Redis本地配置文件的自动重写,这样即使是实例重启配置也不会丢失</li>
<li>原有的master在恢复后降级为slave与新master全量同步</li>
</ul>
<p><strong>哨兵的高可用</strong></p>
<ul>
<li>Sentinel 自动故障迁移使用 Raft 算法来选举领头(leader)Sentinel</li>
<li>超过半数投票选出 Leader,Sentinel Leader 用于下发故障转移的指令</li>
<li>如果某个 Leader 挂了,则使用Raft从剩余的 Sentinel 中选出 Leader</li>
</ul>
<p><strong>哨兵的感知发现</strong></p>
<ul>
<li>每一个Sentinel节点接入Master之后,所有Sentinel的信息也在Master节点上进行了注册</li>
<li>Sentinel 可以通过Master获取其他Sentinel节点的信息</li>
</ul>
<h2 id="配置Redis哨兵模式">配置Redis哨兵模式</h2>
<h3 id="配置文件">配置文件</h3>
<h3 id="配置文件-2">配置文件</h3>
<ul>
<li><code>sentinel.conf</code></li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs properties"><span class="hljs-comment">##sentinel实例之间的通讯端口</span><br><span class="hljs-attr">daemonize</span> <span class="hljs-string">yes</span><br><span class="hljs-attr">port</span> <span class="hljs-string">27000</span><br><span class="hljs-comment">#redis-master</span><br><span class="hljs-attr">sentinel</span> <span class="hljs-string">monitor redis-master 127.0.0.1 7000 2</span><br><span class="hljs-attr">sentinel</span> <span class="hljs-string">down-after-milliseconds redis-master 5000</span><br><span class="hljs-attr">sentinel</span> <span class="hljs-string">failover-timeout redis-master 900000</span><br><span class="hljs-attr">sentinel</span> <span class="hljs-string">parallel-syncs redis-master 2</span><br><span class="hljs-attr">sentinel</span> <span class="hljs-string">auth-pass redis-master 123456</span><br><span class="hljs-attr">logfile</span> <span class="hljs-string">&quot;/data/bd/redis/sentinel/sentinel.log</span><br></code></pre></td></tr></table></figure>
<h3 id="配置项">配置项</h3>
<table>
<thead>
<tr>
<th>配置项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>sentinel monitor &lt;master-name&gt; &lt;ip&gt; &lt;redis-port&gt; &lt;quorum&gt;</td>
<td>哨兵 sentinel监控的redis主节点的 ip port <br /><code>master-name</code>可以自己命名的主节点名字只能由字母A-2,数字0-9,这三个字符&quot;,-_&quot;组成, <br /><code>quorum</code>配置多少个 sentinel哨兵统一认为 master主节点失联那么这时客观上认为主节点失联了</td>
</tr>
<tr>
<td>sentinel auth-pass &lt;master-name&gt; &lt;password&gt;</td>
<td>当在 Redis实例中开启了 requirepass foobared授权密码这样所有连接 Redis实例的客户端都要提供密码</td>
</tr>
<tr>
<td>sentinel down-after-milli seconds&lt;master-name&gt;&lt;milliseconds&gt;</td>
<td>指定多少毫秒之后主节点没有应答哨兵 哨兵主观上认为主节点下线,默认30秒</td>
</tr>
<tr>
<td>sentinel parallet-syncs &lt;master-name&gt;&lt;numslaves&gt;</td>
<td>这个配置项指定了在发生<code>failover</code>主备切换时最多可以有多少个slave同时对新的 master进行同步, 这个数字越小,完成 <code>failover</code>所需的时间就越长 但是如果这个数字越大,就意味着越多的slave因为replication而不可用,<br />可以通过将这个值设为<code>1</code>来保证每次只有一个slave处于不能处理命令请求的状态,</td>
</tr>
<tr>
<td>sentinel fallover-timeout &lt;master-name&gt;&lt;milli seconds&gt;</td>
<td>故障转移的超时时间 <code>failover- timeout</code>可以用在以下这些方面: <br />1.同一个 sentinel对同一个 master两次failover之间的间隔时间,<br />2.当一个save从一个错误的 master那里同步数据开始计算时间,直到 slave被纠正为向正确的 master那里同步数据的时间, <br />3.当想要取消一个正在进行的fai1over所需要的时间,<br />4.当进行 failover时,配置所有slaves指向新的 master所需的最大时间,不过,即使过了这个超时, slaves依然会被正确配置为指向 master,但是就不按<code>parallet-syncs</code>所配置的规则来了<br />默认三分钟(18000)</td>
</tr>
<tr>
<td>sentinel notification-script &lt;master-name&gt;&lt;script-path&gt;</td>
<td>配置当某一事件发生时所需要执行的脚本,可以通过脚本来通知管理员,例如当系统运行不正常时发邮件通知相关人员, 对于脚本的运行结果有以下规则<br />若脚本执行后返回1,那么该脚本稍后将会被再次执行,重复次数目前默认为10 <br />若脚本执行后返回2,或者比2更高的一个返回值,脚本将不会重复执行,<br /> 如果脚本在执行过程中由于收到系统中断信号被终止了,则同返回值为1时的行为相同, <br />一个脚本的最大执行时间为60s,如果超过这个时间,脚本将会被一个SIGGKILL信号终止,之后重新执行 <br />通知型脚本:当 sentinel有任何警告级别的事件发生时(比如说 redis实例的主观失效和容观失效等等),将会去调用这个脚本,这时这个脚本应该通过邮件,SMS等方式去通知系统管理员关于系统不正常运行的信息,调用该脚本时,将传给脚本两个参数,一个是事件的类型一个是事件的描述,如果 <code>sentinel.conf</code>配置文件中配置了这个脚本路径,那么必须保证这个脚本存在于这个路径,并且是可执行的,否则 sentinel无法正常启动成功</td>
</tr>
<tr>
<td>sentinel client-reconfig-script &lt;master-name&gt; &lt;script-path&gt;</td>
<td>客户端重新配置主节点参数脚本:当一个 master由于<code>failover</code>而发生改变时,这个脚本将会被调用,通知相关的客户端关于 master地址已经发生改变的信息 <br />以下参数将会在调用脚本时传给脚本<code> &lt;master-name&gt; &lt;role&gt; &lt;state&gt; &lt;from-ip&gt; &lt;from-port&gt; &lt;to-ip&gt; &lt;to-port&gt;</code> <br />目前<code>&lt;state&gt;</code>总是&quot; failover <code>&lt;ro1e&gt;</code>是&quot; leader”或者&quot; observer&quot;中的一个,<br /> 参数<code>from-ip,from-port,to-ip,to-port</code>是用来和旧的 master和新的master(即旧的slave)通信的 这个脚本应该是通用的,能被多次调用,不是针对性的,</td>
</tr>
</tbody>
</table>
<h3 id="运行哨兵模式">运行哨兵模式</h3>
<ul>
<li><code>Master-&gt;Slave-&gt;Sentinel</code>,要确保按照这个顺序依次启动</li>
<li>Sentinel的启动命令和Redis类似,终端输入:</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kotlin">redis-sentinel ~/sentinel.conf<br></code></pre></td></tr></table></figure>
<ul>
<li>启动成功后可以通过redis客户端工具查看当前Sentinel的信息,终端输入:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">redis-cli -p 27000-h 127.0.0.1<br>127.0.0.1 redis&gt; INFO Sentinel<br><br><span class="hljs-comment"># Sentinel</span><br>sentinel_masters:1<br>sentinel_tilt:0<br>sentinel_running_scripts:0<br>sentinel_scripts_queue_length:0<br>master0:name=redis-master,status=ok,address=192.168.1.51:7000,slaves=2,sentinels=3<br></code></pre></td></tr></table></figure>
<h3 id="sentinel日志">sentinel日志</h3>
<ul>
<li>日志路径在配置文件中设置,终端输入:</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">tail -f/data/bd/redis/sentinel/sentinel.log<br><br>3273:X 08 Apr 10:44:14.733 <span class="hljs-comment"># Sentinel runid is 725b3bc06f18e8db913a44bbbdbc23a3be54c4d1</span><br>3273:X 08 Apr 10:44:14.733 <span class="hljs-comment"># +monitor master redis-master 192.168.1.51 7000 quorum 2</span><br>3273:X 08 Apr 10:44:14.735 * +slave slave 192.168.1.52:7000 192.168.1.52 7000 @ redis-master 192.168.1.51 7000<br>3273:X 08 Apr 10:44:14.744 * +slave slave 192.168.1.53:7000 192.168.1.53 7000 @ redis-master 192.168.1.51 7000<br>3273:X 08 Apr 10:48:12.733 * +sentinel sentinel 192.168.1.52:27000 192.168.1.52:27000 @ redis-master 192.168.1.51 7000<br>3273:X 08 Apr 10:48:20.533 * +sentinel sentinel 192.168.1.53:27000 192.168.1.53:27000 @ redis-master 192.168.1.51 7000<br></code></pre></td></tr></table></figure>
<ul>
<li><code>+slave</code>表示成功发现了从节点</li>
<li><code>+sentinel</code>表示成功发现了Sentinel</li>
<li><code>+sdown</code> 表示哨兵主观认为节点下线</li>
<li><code>+odown</code> 表示哨兵客观认为节点下线</li>
<li><code>+try-failover</code> 表示哨兵开始进行故障恢复</li>
<li><code>+failover-end</code> 表示哨兵完成故障修复,其中包括了领头哨兵的选举,备选从节点的选择等等较为复杂的过程</li>
<li><code>+switch-master</code>表示完成主节点迁移</li>
</ul>
<h3 id="查看sentinel-conf">查看sentinel.conf</h3>
<ul>
<li>重新打开sentinel.conf文件,发现sentinel自动生成了一些信息,记录了监控过程中的状态变化</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">##sentinel实例之间的通讯端口</span><br>daemonize yes<br>port <span class="hljs-number">27000</span><br><span class="hljs-comment">#redis-master</span><br>sentinel monitor redis-master <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.51</span> <span class="hljs-number">7000</span> <span class="hljs-number">2</span><br>sentinel down-after-milliseconds redis-master <span class="hljs-number">5000</span><br>sentinel failover-timeout redis-master <span class="hljs-number">900000</span><br>sentinel parallel-syncs redis-master <span class="hljs-number">2</span><br>sentinel auth-<span class="hljs-keyword">pass</span> redis-master <span class="hljs-number">123456</span><br>logfile <span class="hljs-string">&quot;/data/bd/redis/sentinel/sentinel.log&quot;</span><br><span class="hljs-comment"># Generated by CONFIG REWRITE</span><br><span class="hljs-built_in">dir</span> <span class="hljs-string">&quot;/soft/sentinel&quot;</span><br>sentinel config-epoch redis-master <span class="hljs-number">0</span><br>sentinel leader-epoch redis-master <span class="hljs-number">0</span><br>sentinel known-slave redis-master <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.52</span> <span class="hljs-number">7000</span><br>sentinel known-slave redis-master <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.53</span> <span class="hljs-number">7000</span><br>sentinel known-sentinel redis-master <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.52</span> <span class="hljs-number">27000</span> ef356da8dadb6a16268d25611942ecf001d5cb2e<br>sentinel known-sentinel redis-master <span class="hljs-number">192.168</span><span class="hljs-number">.1</span><span class="hljs-number">.53</span> <span class="hljs-number">27000</span> 188fa69f695fd17639ce1ee38592e894d8a14331<br>sentinel current-epoch <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>
            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Software/">Software</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/Backend/">Backend</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/Backend/Database/">Database</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/Backend/Database/Redis/">Redis</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/Backend/Database/Redis/%E9%AB%98%E5%8F%AF%E7%94%A8/">高可用</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/Software/Backend/Database/Redis/%E9%AB%98%E5%8F%AF%E7%94%A8/%E4%B8%BB%E4%BB%8E%E5%A4%8D%E5%88%B6/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Redis 主从复制</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/Software/Common/%E5%B9%82%E7%AD%89%E6%80%A7/">
                        <span class="hidden-mobile">幂等性</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/events.js" ></script>
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/local-search.js" ></script>



  
    <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/boot.js" ></script>


</body>
</html>
