

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/logo.png">
  <link rel="icon" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/logo.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="Cian">
  <meta name="keywords" content="software computer programmer otes Cloud personal">
  <meta name="description" content="正则表达式 语法  正则表达式(regular expression)描述了一种字符串匹配的模式,可以用来检查一个串是否含有某种子串,将匹配的子串做替换或者从某个串中取出符合某个条件的子串等,在编写处理字符串的程序时,经常会有查找符合某些复杂规则的字符串的需要,正则表达式就是用于描述这些规则的工具,换句话说,正则表达式就是记录文本规则的代码 列目录时,dir *.txt或ls *.txt中的*.t">
<meta property="og:type" content="article">
<meta property="og:title" content="正则表达式 语法">
<meta property="og:url" content="https://softwaremagic.lushan.tk/Software/Common/RegularExpression/%E8%AF%AD%E6%B3%95/">
<meta property="og:site_name" content="SoftwareMagic">
<meta property="og:description" content="正则表达式 语法  正则表达式(regular expression)描述了一种字符串匹配的模式,可以用来检查一个串是否含有某种子串,将匹配的子串做替换或者从某个串中取出符合某个条件的子串等,在编写处理字符串的程序时,经常会有查找符合某些复杂规则的字符串的需要,正则表达式就是用于描述这些规则的工具,换句话说,正则表达式就是记录文本规则的代码 列目录时,dir *.txt或ls *.txt中的*.t">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-06-20T15:29:40.000Z">
<meta property="article:modified_time" content="2021-06-20T15:29:40.000Z">
<meta property="article:author" content="Cian">
<meta property="article:tag" content="software computer programmer otes Cloud personal">
<meta name="twitter:card" content="summary_large_image">
  
  <title>正则表达式 语法 - SoftwareMagic</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.css" />
  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"softwaremagic.lushan.tk","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname"}},"search_path":"https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/local-search.xml"};
  </script>
  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/utils.js" ></script>
  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 50vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>SoftwareMagic</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/img/background.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="正则表达式 语法">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-06-20 23:29" pubdate>
        2021年6月20日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.1k 字
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      16 分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">正则表达式 语法</h1>
            
            <div class="markdown-body">
              <h1>正则表达式 语法</h1>
<ul>
<li>正则表达式(regular expression)描述了一种字符串匹配的模式,可以用来检查一个串是否含有某种子串,将匹配的子串做替换或者从某个串中取出符合某个条件的子串等,在编写处理字符串的程序时,经常会有查找符合某些复杂规则的字符串的需要,正则表达式就是用于描述这些规则的工具,换句话说,正则表达式就是记录文本规则的代码</li>
<li>列目录时,dir *.txt或ls *.txt中的*.txt就不是一个正则表达式,因为这里*与正则式的*的含义是不同的</li>
<li>构造正则表达式的方法和创建数学表达式的方法一样,也就是用多种元字符与运算符可以将小的表达式结合在一起来创建更大的表达式,正则表达式的组件可以是单个的字符,字符集合,字符范围,字符间的选择或者所有这些组件的任意组合</li>
<li>正则表达式是由普通字符(例如字符 a 到 z)以及特殊字符(称为&quot;元字符&quot;)组成的文字模式,模式描述在搜索文本时要匹配的一个或多个字符串,正则表达式作为一个模板,将某个字符模式与所搜索的字符串进行匹配</li>
</ul>
<h2 id="普通字符">普通字符</h2>
<p>普通字符包括没有显式指定为元字符的所有可打印和不可打印字符,这包括所有大写和小写字母,所有数字,所有标点符号和一些其他符号</p>
<h2 id="非打印字符">非打印字符</h2>
<p>非打印字符也可以是正则表达式的组成部分,下表列出了表示非打印字符的转义序列:</p>
<table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">\cx</td>
<td style="text-align:left">匹配由x指明的控制字符,例如, \cM 匹配一个 Control-M 或回车符,x 的值必须为 A-Z 或 a-z 之一,否则,将 c 视为一个原义的 ‘c’ 字符,</td>
</tr>
<tr>
<td style="text-align:left">\f</td>
<td style="text-align:left">匹配一个换页符,等价于 \x0c 和 \cL,</td>
</tr>
<tr>
<td style="text-align:left">\n</td>
<td style="text-align:left">匹配一个换行符,等价于 \x0a 和 \cJ,</td>
</tr>
<tr>
<td style="text-align:left">\r</td>
<td style="text-align:left">匹配一个回车符,等价于 \x0d 和 \cM,</td>
</tr>
<tr>
<td style="text-align:left">\s</td>
<td style="text-align:left">匹配任何空白字符,包括空格,制表符,换页符等等,等价于 [ \f\n\r\t\v],</td>
</tr>
<tr>
<td style="text-align:left">\S</td>
<td style="text-align:left">匹配任何非空白字符,等价于 [^ \f\n\r\t\v],</td>
</tr>
<tr>
<td style="text-align:left">\t</td>
<td style="text-align:left">匹配一个制表符,等价于 \x09 和 \cI,</td>
</tr>
<tr>
<td style="text-align:left">\v</td>
<td style="text-align:left">匹配一个垂直制表符,等价于 \x0b 和 \cK,</td>
</tr>
</tbody>
</table>
<h2 id="特殊字符">特殊字符</h2>
<p>所谓特殊字符,就是一些有特殊含义的字符,如上面说的&quot;*.txt&quot;中的*,简单的说就是表示任何字符串的意思,如果要查找文件名中有*的文件,则需要对*进行转义,即在其前加一个,ls \*.txt</p>
<p>许多元字符要求在试图匹配它们时特别对待,若要匹配这些特殊字符,必须首先使字符&quot;转义&quot;,即,将反斜杠字符 () 放在它们前面,下表列出了正则表达式中的特殊字符:</p>
<table>
<thead>
<tr>
<th style="text-align:left">特别字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配输入字符串的结尾位置,如果设置了 RegExp 对象的 Multiline 属性,则 $ 也匹配 ‘\n’ 或 ‘\r’,要匹配 $ 字符本身,请使用 \$,</td>
</tr>
<tr>
<td style="text-align:left">( )</td>
<td style="text-align:left">标记一个子表达式的开始和结束位置,子表达式可以获取供以后使用,要匹配这些字符,请使用 ( 和 ),</td>
</tr>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">匹配前面的子表达式零次或多次,要匹配 * 字符,请使用 \*,</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">匹配前面的子表达式一次或多次,要匹配 + 字符,请使用 \+,</td>
</tr>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">匹配除换行符 \n之外的任何单字符,要匹配 .,请使用 .,</td>
</tr>
<tr>
<td style="text-align:left">[</td>
<td style="text-align:left">标记一个中括号表达式的开始,要匹配 [,请使用 \[,</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">匹配前面的子表达式零次或一次,或指明一个非贪婪限定符,要匹配 ? 字符,请使用 ?,</td>
</tr>
<tr>
<td style="text-align:left">\</td>
<td style="text-align:left">将下一个字符标记为或特殊字符,或原义字符,或向后引用,或八进制转义符,例如, ‘n’ 匹配字符 ‘n’,‘\n’ 匹配换行符,序列 ‘\’ 匹配 “\”,而 ‘\(’ 则匹配 “(”,</td>
</tr>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配输入字符串的开始位置,除非在方括号表达式中使用,此时它表示不接受该字符集合,要匹配 ^ 字符本身,请使用 ^,</td>
</tr>
<tr>
<td style="text-align:left">{</td>
<td style="text-align:left">标记限定符表达式的开始,要匹配 {,请使用 \{,</td>
</tr>
<tr>
<td style="text-align:left">|</td>
<td style="text-align:left">指明两项之间的一个选择,要匹配 |,请使用 |,</td>
</tr>
</tbody>
</table>
<h2 id="限定符">限定符</h2>
<p>限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配,有*或+或?或{n}或{n,}或{n,m}共6种</p>
<p>正则表达式的限定符有:</p>
<table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">*</td>
<td style="text-align:left">匹配前面的子表达式零次或多次,例如,zo* 能匹配 “z” 以及 “zoo”,* 等价于{0,},</td>
</tr>
<tr>
<td style="text-align:left">+</td>
<td style="text-align:left">匹配前面的子表达式一次或多次,例如,‘zo+’ 能匹配 “zo” 以及 “zoo”,但不能匹配 “z”,+ 等价于 {1,},</td>
</tr>
<tr>
<td style="text-align:left">?</td>
<td style="text-align:left">匹配前面的子表达式零次或一次,例如,“do(es)?” 可以匹配 “do” , “does” 中的 “does” , “doxy” 中的 “do” ,? 等价于 {0,1},</td>
</tr>
<tr>
<td style="text-align:left">{n}</td>
<td style="text-align:left">n 是一个非负整数,匹配确定的 n 次,例如,‘o{2}’ 不能匹配 “Bob” 中的 ‘o’,但是能匹配 “food” 中的两个 o,</td>
</tr>
<tr>
<td style="text-align:left">{n,}</td>
<td style="text-align:left">n 是一个非负整数,至少匹配n 次,例如,‘o{2,}’ 不能匹配 “Bob” 中的 ‘o’,但能匹配 “foooood” 中的所有 o,‘o{1,}’ 等价于 ‘o+’,‘o{0,}’ 则等价于 ‘o*’,</td>
</tr>
<tr>
<td style="text-align:left">{n,m}</td>
<td style="text-align:left">m 和 n 均为非负整数,其中n &lt;= m,最少匹配 n 次且最多匹配 m 次,例如,“o{1,3}” 将匹配 “fooooood” 中的前三个 o,‘o{0,1}’ 等价于 ‘o?’,请注意在逗号和两个数之间不能有空格,</td>
</tr>
</tbody>
</table>
<p>由于章节编号在大的输入文档中会很可能超过九,所以您需要一种方式来处理两位或三位章节编号,限定符给您这种能力,下面的正则表达式匹配编号为任何位数的章节标题:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/Chapter [1-9][0-9]*/</span><br></code></pre></td></tr></table></figure>
<p>请注意,限定符出现在范围表达式之后,因此,它应用于整个范围表达式,在本例中,只指定从 0 到 9 的数字(包括 0 和 9)</p>
<p>这里不使用 + 限定符,因为在第二个位置或后面的位置不一定需要有一个数字,也不使用?字符,因为它将章节编号限制到只有两位数,您需要至少匹配 Chapter 和空格字符后面的一个数字</p>
<p>如果您知道章节编号被限制为只有 99 章,可以使用下面的表达式来至少指定一位但至多两位数字</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/Chapter [0-9]&#123;1,2&#125;/</span><br></code></pre></td></tr></table></figure>
<p>上面的表达式的缺点是,大于 99 的章节编号仍只匹配开头两位数字,另一个缺点是 Chapter 0 也将匹配,只匹配两位数字的更好的表达式如下:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/Chapter [1-9][0-9]?/</span><br></code></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/Chapter [1-9][0-9]&#123;0,1&#125;/</span><br></code></pre></td></tr></table></figure>
<p>*<strong>,+和?限定符都是贪婪的,因为它们会尽可能多的匹配文字,只有在它们的后面加上一个?就可以实现非贪婪或最小匹配,</strong></p>
<p>例如,您可能搜索 HTML 文档,以查找括在 H1 标记内的章节标题,该文本在您的文档中如下:</p>
<figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-section">&lt;H1&gt;</span><span class="hljs-attribute">Chapter</span> <span class="hljs-number">1</span> – Introduction to Regular Expressions&lt;/H<span class="hljs-number">1</span>&gt;<br></code></pre></td></tr></table></figure>
<p>下面的表达式匹配从开始小于符号 (&lt;) 到关闭 H1 标记的大于符号 (&gt;) 之间的所有内容</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/&lt;.*&gt;/</span><br></code></pre></td></tr></table></figure>
<p>如果您只需要匹配开始 H1 标记,下面的&quot;非贪心&quot;表达式只匹配 &lt;H1&gt;</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/&lt;.*?&gt;/</span><br></code></pre></td></tr></table></figure>
<p>通过在 *,+ 或 ? 限定符之后放置 ?,该表达式从&quot;贪心&quot;表达式转换为&quot;非贪心&quot;表达式或者最小匹配</p>
<h2 id="定位符">定位符</h2>
<p>定位符使您能够将正则表达式固定到行首或行尾,它们还使您能够创建这样的正则表达式,这些正则表达式出现在一个单词内,在一个单词的开头或者一个单词的结尾</p>
<p>定位符用来描述字符串或单词的边界,^和$分别指字符串的开始与结束,\b描述单词的前或后边界,\B表示非单词边界</p>
<p>正则表达式的限定符有:</p>
<table>
<thead>
<tr>
<th style="text-align:left">字符</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">^</td>
<td style="text-align:left">匹配输入字符串开始的位置,如果设置了 RegExp 对象的 Multiline 属性,^ 还会与 \n 或 \r 之后的位置匹配,</td>
</tr>
<tr>
<td style="text-align:left">$</td>
<td style="text-align:left">匹配输入字符串结尾的位置,如果设置了 RegExp 对象的 Multiline 属性,$ 还会与 \n 或 \r 之前的位置匹配,</td>
</tr>
<tr>
<td style="text-align:left">\b</td>
<td style="text-align:left">匹配一个字边界,即字与空格间的位置,</td>
</tr>
<tr>
<td style="text-align:left">\B</td>
<td style="text-align:left">非字边界匹配,</td>
</tr>
</tbody>
</table>
<p><strong>注意</strong>:不能将限定符与定位点一起使用,由于在紧靠换行或者字边界的前面或后面不能有一个以上位置,因此不允许诸如 ^* 之类的表达式</p>
<p>若要匹配一行文本开始处的文本,请在正则表达式的开始使用 ^ 字符,不要将 ^ 的这种用法与中括号表达式内的用法混淆</p>
<p>若要匹配一行文本的结束处的文本,请在正则表达式的结束处使用 $ 字符</p>
<p>若要在搜索章节标题时使用定位点,下面的正则表达式匹配一个章节标题,该标题只包含两个尾随数字,并且出现在行首:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/^Chapter [1-9][0-9]&#123;0,1&#125;/</span><br></code></pre></td></tr></table></figure>
<p>真正的章节标题不仅出现行的开始处,而且它还是该行中仅有的文本,它即出现在行首又出现在同一行的结尾,下面的表达式能确保指定的匹配只匹配章节而不匹配交叉引用,通过创建只匹配一行文本的开始和结尾的正则表达式,就可做到这一点</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/^Chapter [1-9][0-9]&#123;0,1&#125;$/</span><br></code></pre></td></tr></table></figure>
<p>匹配字边界稍有不同,但向正则表达式添加了很重要的能力,字边界是单词和空格之间的位置,非字边界是任何其他位置,下面的表达式匹配单词 Chapter 的开头三个字符,因为这三个字符出现字边界后面:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/\bCha/</span><br></code></pre></td></tr></table></figure>
<p>\b 字符的位置是非常重要的,如果它位于要匹配的字符串的开始,它在单词的开始处查找匹配项,如果它位于字符串的结尾,它在单词的结尾处查找匹配项,例如,下面的表达式匹配单词 Chapter 中的字符串 ter,因为它出现在字边界的前面:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/ter\b/</span><br></code></pre></td></tr></table></figure>
<p>下面的表达式匹配 Chapter 中的字符串 apt,但不匹配 aptitude 中的字符串 apt:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk"><span class="hljs-regexp">/\Bapt/</span><br></code></pre></td></tr></table></figure>
<p>字符串 apt 出现在单词 Chapter 中的非字边界处,但出现在单词 aptitude 中的字边界处,对于 \B 非字边界运算符,位置并不重要,因为匹配不关心究竟是单词的开头还是结尾</p>
<h2 id="选择">选择</h2>
<p>用圆括号将所有选择项括起来,相邻的选择项之间用|分隔,但用圆括号会有一个副作用,是相关的匹配会被缓存,此时可用?:放在第一个选项前来消除这种副作用</p>
<p>其中?:是非捕获元之一,还有两个非捕获元是?=和?!,这两个还有更多的含义,前者为正向预查,在任何开始匹配圆括号内的正则表达式模式的位置来匹配搜索字符串,后者为负向预查,在任何开始不匹配该正则表达式模式的位置来匹配搜索字符串</p>
<h2 id="反向引用">反向引用</h2>
<p>对一个正则表达式模式或部分模式两边添加圆括号将导致相关匹配存储到一个临时缓冲区中,所捕获的每个子匹配都按照在正则表达式模式中从左到右出现的顺序存储,缓冲区编号从 1 开始,最多可存储 99 个捕获的子表达式,每个缓冲区都可以使用 ‘\n’ 访问,其中 n 为一个标识特定缓冲区的一位或两位十进制数</p>
<p>可以使用非捕获元字符 ‘?:’,‘?=’ 或 ‘?!’ 来重写捕获,忽略对相关匹配的保存</p>
<p>反向引用的最简单的,最有用的应用之一,是提供查找文本中两个相同的相邻单词的匹配项的能力,以下面的句子为例:</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs pgsql"><span class="hljs-keyword">Is</span> <span class="hljs-keyword">is</span> the <span class="hljs-keyword">cost</span> <span class="hljs-keyword">of</span> <span class="hljs-keyword">of</span> gasoline going up up?<br></code></pre></td></tr></table></figure>
<p>上面的句子很显然有多个重复的单词,如果能设计一种方法定位该句子,而不必查找每个单词的重复出现,那该有多好,下面的正则表达式使用单个子表达式来实现这一点:</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs css">/\<span class="hljs-selector-tag">b</span>(<span class="hljs-selector-attr">[a-z]</span>+) \<span class="hljs-number">1</span>\<span class="hljs-selector-tag">b</span>/gi<br></code></pre></td></tr></table></figure>
<p>捕获的表达式,正如 [a-z]+ 指定的,包括一个或多个字母,正则表达式的第二部分是对以前捕获的子匹配项的引用,即,单词的第二个匹配项正好由括号表达式匹配,\1 指定第一个子匹配项,字边界元字符确保只检测整个单词,否则,诸如&quot;is issued&quot;或&quot;this is&quot;之类的词组将不能正确地被此表达式识别</p>
<p>正则表达式后面的全局标记 (g) 指示,将该表达式应用到输入字符串中能够查找到的尽可能多的匹配,表达式的结尾处的不区分大小写 (i) 标记指定不区分大小写,多行标记指定换行符的两边可能出现潜在的匹配</p>
<p>反向引用还可以将通用资源指示符 (URI) 分解为其组件,假定您想将下面的 URI 分解为协议(ftp,http 等等),域地址和页/路径:</p>
<figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs awk">http:<span class="hljs-regexp">//</span>www.w3cschool.cn:<span class="hljs-number">80</span><span class="hljs-regexp">/html/</span>html-tutorial.html<br></code></pre></td></tr></table></figure>
<p>下面的正则表达式提供该功能:</p>
<figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gcode">/<span class="hljs-comment">(\w+)</span>:\/\/<span class="hljs-comment">([^/:]+)</span><span class="hljs-comment">(:\d*)</span>?<span class="hljs-comment">([^# ]*)</span>/<br></code></pre></td></tr></table></figure>
<p>第一个括号子表达式捕获 Web 地址的协议部分,该子表达式匹配在冒号和两个正斜杠前面的任何单词,第二个括号子表达式捕获地址的域地址部分,子表达式匹配 / 或 : 之外的一个或多个字符,第三个括号子表达式捕获端口号(如果指定了的话),该子表达式匹配冒号后面的零个或多个数字,只能重复一次该子表达式,最后,第四个括号子表达式捕获 Web 地址指定的路径和/或页信息,该子表达式能匹配不包括 # 或空格字符的任何字符序列</p>
<p>将正则表达式应用到上面的 URI,各子匹配项包含下面的内容:</p>
<ul>
<li>第一个括号子表达式包含&quot;http&quot;</li>
<li>第二个括号子表达式包含&quot;<a target="_blank" rel="noopener" href="http://www.w3cschool.cn">www.w3cschool.cn</a>&quot;</li>
<li>第三个括号子表达式包含&quot;:80&quot;</li>
<li>第四个括号子表达式包含&quot;/html/html-tutorial.html&quot;</li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Software/">Software</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/Common/">Common</a>
                    
                      <a class="hover-with-bg" href="/categories/Software/Common/RegularExpression/">RegularExpression</a>
                    
                  </div>
                
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/Software/Language/Shell/%E7%89%B9%E6%AE%8A%E7%AC%A6%E5%8F%B7/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Shell 特殊符号</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/Software/DesignPattern/%E7%BB%93%E6%9E%84%E5%9E%8B%E6%A8%A1%E5%BC%8F/%E6%A1%A5%E6%8E%A5%E6%A8%A1%E5%BC%8F/">
                        <span class="hidden-mobile">设计模式 桥接模式</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                

              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
    
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/events.js" ></script>
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/local-search.js" ></script>



  
    <script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js" ></script>
  






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>









  <script  src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js" ></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({"theme":"default"});
    }
  </script>







<!-- 主题的启动项 保持在最底部 -->
<script  src="https://cdn.jsdelivr.net/gh/LuShan123888/SoftwareMagic@gh-pages/js/boot.js" ></script>


</body>
</html>
