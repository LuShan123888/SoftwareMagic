---
title: MySQL 初始化
categories:
- Software
- Backend
- Database
- MySQL
---
# MySQL 初始化

## Docker

```shell
$ docker run -d \
-p 3306:3306 \
--name mysql \
--hostname mysql \
-v ~/DockerVolumes/mysql/data:/var/lib/mysql \
-v ~/DockerVolumes/mysql/conf:/etc/mysql \
-e MYSQL_ROOT_PASSWORD=123456 \
mysql:5.7
```

## yum

**安装MySQL YUM资源库**

```bash
$ yum localinstall https://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm
```

**安装MySQL5.7**

```bash
$ yum install -y mysql-community-server
```

**启动MySQL服务器和MySQL的自动启动**

```bash
$ systemctl start mysqld.service
$ systemctl enable mysqld.service
```

### 初始化密码

- 由于MySQL从5.7开始不允许首次安装后使用空密码进行登录,为了加强安全性,系统会随机生成一个密码以供管理员首次登录使用
    这个密码记录在`/var/log/mysqld.log`文件中,使用下面的命令可以查看此密码

```bash
$ cat /var/log/mysqld.log|grep 'A temporary password'
A temporary password is generated for root@localhost: DOqInortw9/<
```

- 使用随机生产的密码登录到服务端后,必须马上修改密码,不然会报如下错误:

```mysql
mysql> show databases;
ERROR 1820 (HY000): You must reset your password using ALTER USER statement before executing this statement.
```

- 修改密码

```mysql
UPDATE mysql.user SET authentication_string=password('123456') WHERE user='root';
FLUSH PRIVILEGES;
```
