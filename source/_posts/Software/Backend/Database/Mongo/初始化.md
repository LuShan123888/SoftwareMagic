---
title: Mongo 初始化
categories:
- Software
- Backend
- Database
- Mongo
---
# Mongo 初始化

## 安装

```shell
$ docker run -d \
-p 27017:27017 \
-v ~/DockerVolumes/mongo/data:/data/db \
-e MONGO_INITDB_ROOT_USERNAME=root \
-e MONGO_INITDB_ROOT_PASSWORD=123456 \
-e MONGO_INITDB_DATABASE=test \
--name mongo mongo:5.0.8
```

## 服务

### 启动

**后台运行**

```shell
$ mongod --dbpath /usr/local/var/mongodb --logpath /usr/local/var/log/mongodb/mongo.log --fork
```

- 若要使用账号密码服务 需要在启动时加 --auth

**配置文件运行**

```shell
$ mongod --config /usr/local/etc/mongod.conf
```

```yaml
systemLog:
	#MongoDB发送所有日志输出的目标指定为文件
	#The path of the log file to which mongod or mongos should send all diagnostic logging information 
	destination: file
	#mongod或mongos应向其发送所有诊断日志记录信息的日志文件的路径
	path: "/mongodb/single/log/mongod.log" 
	#当mongos或mongod实例重新启动时，mongos或mongod会将新条目附加到现有日志文件的末尾。
	logAppend: true
storage:
	#mongod实例存储其数据的目录。storage.dbPath设置仅适用于mongod。
	#The directory where the mongod instance stores its data.Default Value is "/data/db". 
	dbPath: "/mongodb/single/data/db"
	journal:
		#启用或禁用持久性日志以确保数据文件保持有效和可恢复。
		enabled: true 
processManagement:
	#启用在后台运行mongos或mongod进程的守护进程模式。
	fork: true 
net:
	#服务实例绑定的IP，默认是localhost 
	bindIp: localhost,192.168.0.2
	#绑定的端口，默认是27017 
	port: 27017
```

### 连接

```shell
# 需要账号密码的登陆方式
$ mongo 服务器IP地址
mongo 127.0.0.1/admin -u admin -p 123456
# 或mongo进入shell
$ use admin
$ db.auth('admin','123456')
```

### 关闭

```shell
# 客户端登录服务，注意，这里通过localhost登录，如果需要远程登录，必须先登录认证才行。 
$ mongo --port 27017
#切换到admin库
$ use admin
# 关闭服务
$ db.shutdownServer()
```

### 查看服务信息

```shell
$ ps aux | grep -v grep | grep mongod
```

## 命令

#### 查看集合

```shell
$ show collections
```

#### 创建集合

```shell
$ db.createCollection('c1')
```

#### 删除集合

选择指定的数据库并执行如下命令

```shell
$ db.集合名.drop()
```