---
title: Linux 网络配置
categories:
- Software
- System
- Linux
---
# Linux 网络配置

## 获取本机网络配置

- 网络配置目录: `cd /etc/sysconfig/network-scripts`

```
ip addr
```

```shell
ifconfig
#如果命令未找到,安装net-tools
yum install net-tools.x86_64
```

## 网卡配置

**获取DHCP**

```shell
dhclient
```

**编辑网卡配置文件**

```shell
sudo vim /etc/sysconfig/network-scripts/ifcfg-ens33
```

```properties
TYPE=Ethernet
PROXY_METHOD=none
BROWSER_ONLY=no
BOOTPROTO=static
DEFROUTE=yes
IPV4_FAILURE_FATAL=no
IPV6INIT=yes
IPV6_AUTOCONF=yes
IPV6_DEFROUTE=yes
IPV6_FAILURE_FATAL=no
IPV6_ADDR_GEN_MODE=stable-privacy
NAME=ens33
UUID=9a3c5944-e6fd-421d-b359-32430028b848
DEVICE=ens33
ONBOOT=yes
IPADDR=192.168.134.128
NETMASK=255.255.0.0
GATEWAY=192.168.134.2
DNS=192.168.134.2
```

**重启网卡服务**

```shell
systemctl restart network.service
```

**查看路由**

```shell
ip route show
```

**查看DNS服务器**

```shell
cat /etc/resolv.conf
```

## 防火墙配置

**查看firewall服务状态**

```
systemctl status firewalld
```

**管理firewall服务**

```bash
# 开启
service firewalld start
# 重启
service firewalld restart
# 关闭
service firewalld stop
```

**查看防火墙规则**

```bash
firewall-cmd --list-all    # 查看全部信息
firewall-cmd --list-ports  # 只看端口信息
```

**开启端口**

```bash
firewall-cmd --zone=public --add-port=80/tcp --permanent
```

- `--zone`:作用域
- `--add-port=80/tcp`:添加端口,格式为:端口/通讯协议
- `--permanent`:永久生效,没有此参数重启后失效


**重启防火墙**

```bash
systemctl restart firewalld.service
```

## 端口测试

**查看端口占用情况**

```
nmap {ip-address} -p {port}
```

**查看端口对应的服务**

```shell
netstat -an | grep 3306
```

**查看进程监听的端口**

```shell
lsof -i:80
```

- **-i**参数表示网络链接

