---
title: Vsftpd 命令
categories:
- Software
- Tools
- Vsftpd
---
# Vsftpd 命令

## FTP服务管理

```shell
sudo service vsftpd start|stop|restart
sudo /etc/init.d/vsftpd start|stop|restart
```

## 检查FTP端口

```shell
netstat -tnl
```

ftp默认情况下,命令端口是21,数据端口就是20,或者直接在浏览器里输入"ftp://服务器IP”

## 创建FTP用户

```shell
sudo useradd ftpuser -m -s /bin/bash
sudo passwd ftpuser
```

## 设置允许用户登录权限

- 为用户创建一个替代的本地 root 目录(ftpuser,你的可能和这不一样),然后设置目录权限,取消其他所有用户对此目录的写入权限

```shell
sudo mkdir /home/ftpuser/ftp
sudo chown nobody:nogroup /home/ftpuser/ftp
# OR sudo chown ftpuser:ftpuser /home/ftpuser/ftp
sudo chmod a-w /home/ftpuser/ftp
```

### 在本地 root 目录下创建一个具有合适权限的目录,用户将在这儿存储文件

```shell
sudo mkdir /home/ftpuser/ftp/files
sudo chown -R ftpuser:ftpuser /home/ftpuser/ftp/files
sudo chmod -R 0770 /home/ftpuser/ftp/files/
```

### 允许ftpuser登录FTP

```shell
echo "ftpuser" | sudo tee -a /etc/vsftpd.user_list
```

## FTP命令

使用 FTP 上传/下载文件

```shell
cd files
put test
```

### Entering Passive Mode问题处理

```shell
ftp> passive
Passive mode off.
ftp> passive (再次运行命令可打开)
Passive mode on.
```
